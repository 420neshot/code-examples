# SHA512 + HMAC sample of encryption in Larky

This sample includes:
1. Python script that generates an ectrypted message of an input data;
2. Larky test `.star` file that generates the same result of the same input data;
3. Ready-for-use YAML (Inbound Route) that produces the same result as previous scripts.

## Testing part:

#### 1. Python:

Python script includes all hard-coded inside. As a result, it prints the encrypted message:
```
$ python python_sample.py
>>> Signature:  f81d760b6fec9f1fc330401293c0b7add20f7ae0db5a4265b3cc69e8ece609947c2488f9e495cdbf9bbc3134c51ee2ef896d07d370d5ed3f95183305b5706fd6
>>> Result  : Jv/5lhIKjbxcNvJaFl5PaL6hLwJHIhh7QpLaj3o4CcrzwERR9SCndecvHGPnocrnqKy7MdUpXyle9EvK58M5WQ==
```

#### 2. Larky test:

To be able to run Larky locally, you'll need to setup your local environment:
https://www.verygoodsecurity.com/docs/larky/test-larky-locally

Example of run:

<img width="1367" alt="image" src="https://user-images.githubusercontent.com/78090218/190904058-846218f1-5a1d-4960-ae31-16e932c62998.png">

#### 3. YAML file:

Upload the YAML to your vault and run (secret here is not real, it was generated by randomizer):
```
curl https://tntbmt67sc7.sandbox.verygoodproxy.com/post -k \
  -H "content-type: application/json" \
  -H "shared-secret: 3vQE4R45Q4yz7dMDHUz56waSnnPD7P" \
  -H "date: Sun, 18 Sep 2022 10:52:03 UTC" \
  -d '{"merchantTransactionId":"2022-09-18-0004","amount":"9.99","currency":"EUR"}'
```

Example of response:
```
"json": {
    "result": "Jv/5lhIKjbxcNvJaFl5PaL6hLwJHIhh7QpLaj3o4CcrzwERR9SCndecvHGPnocrnqKy7MdUpXyle9EvK58M5WQ==",
    "signature": "f81d760b6fec9f1fc330401293c0b7add20f7ae0db5a4265b3cc69e8ece609947c2488f9e495cdbf9bbc3134c51ee2ef896d07d370d5ed3f95183305b5706fd6"
  }
```
